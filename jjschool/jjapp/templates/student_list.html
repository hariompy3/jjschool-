<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student List</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .search-container {
            position: relative;
            margin-bottom: 20px;
        }
        #search-box {
            width: 100%;
            padding: 12px 40px 12px 12px;
            font-size: 16px;
            border: none;
            border-bottom: 2px solid #9e9e9e;
            background-color: transparent;
            transition: border-color 0.3s;
        }
        #search-box:focus {
            outline: none;
            border-bottom-color: #333;
        }
        .search-icon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #9e9e9e;
        }
        #suggestions {
            list-style-type: none;
            padding: 0;
            margin: 0;
            background-color: white;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 4px 4px;
            display: none;
            position: absolute;
            width: 100%;
            z-index: 1;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        #suggestions li {
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #suggestions li:hover {
            background-color: #f5f5f5;
        }
        #student-list {
            list-style-type: none;
            padding: 0;
        }
        .student-item {
            background-color: white;
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: box-shadow 0.3s;
        }
        .student-item:hover {
            box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
        }
        .student-name {
            font-weight: bold;
        }
        .student-info {
            text-align: center;
            flex-grow: 1;
        }
        .profile-btn {
            background-color: #333;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            text-transform: uppercase;
            font-weight: 500;
            letter-spacing: 0.5px;
        }
        .profile-btn:hover {
            background-color: #555;
        }
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            .student-item {
                flex-direction: column;
                align-items: flex-start;
            }
            .profile-btn {
                margin-top: 10px;
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Student List</h1>
        <div class="search-container">
            <input type="text" id="search-box" placeholder="Search for a student...">
            <i class="material-icons search-icon">search</i>
        </div>
        <ul id="suggestions"></ul>
        <ul id="student-list"></ul>
    </div>

    <script>
        const students = {{ students|safe }};
        const searchBox = document.getElementById('search-box');
        const suggestionsList = document.getElementById('suggestions');
        const studentList = document.getElementById('student-list');

        // Initially display up to 20 students
        displayStudents(students.slice(0, 20));

        searchBox.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const filteredStudents = students.filter(student => 
                student.name.toLowerCase().includes(searchTerm) ||
                student.grade.toLowerCase().includes(searchTerm) ||
                student.major.toLowerCase().includes(searchTerm)
            );

            displaySuggestions(filteredStudents);
            displayStudents(filteredStudents.slice(0, 20));
        });

        function displaySuggestions(students) {
            suggestionsList.innerHTML = '';
            if (students.length > 0 && searchBox.value) {
                students.slice(0, 5).forEach(student => {
                    const li = document.createElement('li');
                    li.textContent = `${student.name} - ${student.major}`;
                    li.addEventListener('click', function() {
                        searchBox.value = student.name;
                        suggestionsList.style.display = 'none';
                        displayStudents([student]);
                    });
                    suggestionsList.appendChild(li);
                });
                suggestionsList.style.display = 'block';
            } else {
                suggestionsList.style.display = 'none';
            }
        }

        function displayStudents(students) {
            studentList.innerHTML = '';
            students.forEach(student => {
                const li = document.createElement('li');
                li.className = 'student-item';
                li.innerHTML = `
                    <span class="student-name">${student.name}</span>
                    <div class="student-info">
                        <div>Grade: ${student.grade}</div>
                        <div>Major: ${student.major}</div>
                    </div>
                    <button class="profile-btn" onclick="viewProfile('${student.name}')">Profile</button>
                `;
                studentList.appendChild(li);
            });
        }

        function viewProfile(studentName) {
            // In a real application, this would navigate to the student's profile page
            alert(`Navigating to profile of ${studentName}`);
            // window.location.href = `/profile_student?name=${encodeURIComponent(studentName)}`;
        }
    </script>
</body>
</html>